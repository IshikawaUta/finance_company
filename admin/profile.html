---
layout: default
---
<div class="container mx-auto px-4 py-8 max-w-2xl">
    <a href="/admin/" class="inline-flex items-center text-slate-500 hover:text-blue-600 transition mb-8 group">
        <i class="fas fa-arrow-left mr-2 group-hover:-translate-x-1 transition-transform"></i>
        Kembali ke Dashboard
    </a>

    <div class="glass rounded-[2.5rem] overflow-hidden shadow-xl border border-white">
        <div class="bg-gradient-to-r from-blue-600 to-indigo-700 p-10 text-center relative">
            <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 20px 20px;"></div>
            <div class="relative">
                <div class="w-24 h-24 bg-white rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg">
                    <i class="fas fa-user-tie text-4xl text-blue-600"></i>
                </div>
                <h1 id="user-name" class="text-2xl font-bold text-white uppercase tracking-wider">Memuat...</h1>
                <span id="user-role" class="inline-block mt-2 px-4 py-1 bg-white/20 backdrop-blur-md rounded-full text-xs font-bold text-white uppercase tracking-widest">
                    Role: ---
                </span>
            </div>
        </div>

        <div class="p-8 space-y-6 bg-white/50">
            <div class="grid grid-cols-1 gap-6">
                <div class="space-y-1">
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">Alamat Email</p>
                    <p id="user-email" class="text-lg font-semibold text-slate-700 tracking-tight">---</p>
                </div>
                
                <div class="space-y-1">
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">ID Pengguna</p>
                    <p id="user-id" class="text-sm font-mono text-slate-500 break-all">---</p>
                </div>

                <div class="space-y-1">
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">Terakhir Login</p>
                    <p id="user-last-login" class="text-sm font-semibold text-slate-700">---</p>
                </div>
            </div>

            <hr class="border-slate-100">

            <div class="flex flex-col gap-3 pt-4">
                <button onclick="netlifyIdentity.logout()" class="w-full bg-red-50 text-red-600 font-bold py-4 rounded-2xl hover:bg-red-100 transition duration-300 flex items-center justify-center gap-2">
                    <i class="fas fa-sign-out-alt"></i> Keluar dari Sistem
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    // Pastikan user sudah login
    netlifyIdentity.on('init', user => {
        if (!user) {
            window.location.href = "/";
        } else {
            renderProfile(user);
        }
    });

    function renderProfile(user) {
        // Ambil data dari metadata Netlify
        const name = user.user_metadata.full_name || "Admin User";
        const email = user.email;
        const id = user.id;
        const lastLogin = new Date(user.last_login_at).toLocaleString('id-ID', { 
            dateStyle: 'full', 
            timeStyle: 'short' 
        });
        const roles = user.app_metadata.roles ? user.app_metadata.roles.join(', ') : 'No Role';

        // Update DOM
        document.getElementById('user-name').innerText = name;
        document.getElementById('user-email').innerText = email;
        document.getElementById('user-id').innerText = id;
        document.getElementById('user-last-login').innerText = lastLogin;
        document.getElementById('user-role').innerText = `Role: ${roles}`;
    }

    netlifyIdentity.on('logout', () => window.location.href = "/");
</script>